<label class="tx-staffm bold">Profil-Bild</label><br />
<f:if condition="{mitarbeiter.image}!=''"> <!-- FEHLER: keine Ausgabe -> image im Blog als String definiert (erledigt) -->
    <f:then>
        <f:for each="{images}" as="image" key="key">
            <f:image class="tx_staffm profilbild" src="uploads/tx_srfeuserregister/{image}" /> 
            <f:link.action action="deleteImage" controller="Mitarbeiter" arguments="{mitarbeiter:mitarbeiter, image:image}" additionalAttributes="{role: 'form'}" class="btn btn-default">
                    Bild entfernen
            </f:link.action>&nbsp;
        </f:for>
    </f:then>
    <f:else>
        <f:form.upload property="image" class="form-control" /><br />
    </f:else>
</f:if>
<br />
<label class="tx-staffm bold" for="personalnummer">
	<f:translate key="tx_staffm_domain_model_mitarbeiter.personalnummer" />
</label><br />
	<f:form.textfield style="width:300px" property="personalnummer" /><br />        
<label class="tx-staffm bold" for="username">
	<f:translate key="tx_staffm_domain_model_mitarbeiter.username" />
</label><br />
	<f:form.textfield style="width:300px" title="AD-Name von IT" property="username" /><br />
<label class="tx-staffm bold" for="dateOfBirth">
	<f:translate key="tx_staffm_domain_model_mitarbeiter.date_of_birth" />        
</label><br />       
    <f:if condition="{mitarbeiter.dateOfBirth}!=0">
        <f:then>
            <f:form.textfield style="width:300px" id="dateb" value="{f:format.date(date: mitarbeiter.dateOfBirth, format: 'd-m-Y')}" title="Format: TT-MM-JJJJ" /><f:form.hidden id="dateInteger" property="dateOfBirth" /><br />        
        </f:then>
        <f:else>
            <f:form.textfield style="width:300px" id="dateb" value="" title="Format: TT-MM-JJJJ" /><f:form.hidden id="dateInteger" property="dateOfBirth" /><br />
        </f:else>
    </f:if>
<label class="tx-staffm bold" for="lastName">
	<f:translate key="tx_staffm_domain_model_mitarbeiter.last_name" />
</label><br />
	<f:form.textfield style="width:300px" property="lastName" /><br />
<label class="tx-staffm bold" for="firstName">
	<f:translate key="tx_staffm_domain_model_mitarbeiter.first_name" />
</label><br />
	<f:form.textfield style="width:300px" property="firstName" /><br />
<label class="tx-staffm bold" for="telephone">
	<f:translate key="tx_staffm_domain_model_mitarbeiter.telephone" />
</label><br />
	<f:form.textfield style="width:300px" property="telephone" /><br />
<label class="tx-staffm bold" for="fax">
	<f:translate key="tx_staffm_domain_model_mitarbeiter.fax" />
</label><br />
	<f:form.textfield style="width:300px" property="fax" /><br />
<label class="tx-staffm bold" for="handy">
	<f:translate key="tx_staffm_domain_model_mitarbeiter.handy" />
</label><br />
	<f:form.textfield style="width:300px" property="handy" /><br />
<label class="tx-staffm bold" for="email">
	<f:translate key="tx_staffm_domain_model_mitarbeiter.email" />
</label><br />
	<f:form.textfield style="width:300px" property="email" /><br />
<label class="tx-staffm bold" for="title">
	<f:translate key="tx_staffm_domain_model_mitarbeiter.title" />
</label><br />
	<f:form.textfield style="width:300px" property="title" /><br />
<label class="tx-staffm bold" for="kostenstelle">
	<f:translate key="tx_staffm_domain_model_mitarbeiter.kostenstelle" />
</label><br />        
	<f:form.hidden property="kostenstelle" />
        <f:form.textfield style="width:300px" value="{mitarbeiter.kostenstelle.nummer} {mitarbeiter.kostenstelle.bezeichnung}" disabled="disabled" />
        <div class="btn-group" role="group">
            <f:link.action class="btn btn-default" action="list" controller="Kostenstelle" arguments="{mitarbeiter:mitarbeiter, kostenstelle:kostenstelle, key:'auswahl'}">Auswahl</f:link.action>
            <f:if condition="{mitarbeiter.kostenstelle}">
                <f:link.action class="btn btn-default" action="deleteKst" controller="Kostenstelle" arguments="{mitarbeiter:mitarbeiter}">Entfernen</f:link.action>
            </f:if>        
        </div>
        <br />
<label class="tx-staffm bold" for="position">
	<f:translate key="tx_staffm_domain_model_mitarbeiter.position" />
</label><br />
	<f:form.hidden property="position" />
        <f:form.textfield style="width:300px" disabled="disabled" value="{mitarbeiter.position.bezeichnung}" />
        <div class="btn-group" role="group">
            <f:link.action class="btn btn-default" action="list" controller="Position" arguments="{mitarbeiter:mitarbeiter, position:position, key:'auswahl'}">Auswahl</f:link.action>
            <f:if condition="{mitarbeiter.position}">
                <f:link.action class="btn btn-default" action="deletePosition" controller="Position" arguments="{mitarbeiter:mitarbeiter}">Entfernen</f:link.action>
            </f:if>
        </div>
        <br />
<label class="tx-staffm bold" for="firma">
	<f:translate key="tx_staffm_domain_model_mitarbeiter.firma" />
</label><br />
	<f:form.hidden property="firma" />
        <f:form.textfield style="width:300px" disabled="disabled" value="{mitarbeiter.firma.bezeichnung}" />
        <div class="btn-group" role="group">
            <f:link.action class="btn btn-default" action="list" controller="Firma" arguments="{mitarbeiter:mitarbeiter, firma:firma, key:'auswahl'}">Auswahl</f:link.action>
            <f:if condition="{mitarbeiter.firma}">
                <f:link.action class="btn btn-default" action="deleteFirma" controller="Firma" arguments="{mitarbeiter:mitarbeiter}">Entfernen</f:link.action>
            </f:if>
        </div>
        <br />
<label class="tx-staffm bold" for="qualifikation">
	<f:translate key="tx_staffm_domain_model_qualifikation" />        
</label><br />
        <f:if condition="{mitarbeiter.mitarbeiterQualifikationen}">
            <f:then>
                <f:for each="{mitarbeiter.mitarbeiterQualifikationen}" as="quali" iteration="qIteration">
                    <f:form.textfield style="width:300px" disabled="disabled" value="{qIteration.cycle} - {quali.qualifikation.bezeichnung}" />
                    <f:if condition="{qIteration.isLast}">
                        <div class="btn-group" role="group">
                            <f:link.action class="btn btn-default" action="list" controller="Qualifikation" arguments="{mitarbeiter:mitarbeiter, key:'auswahl'}">Auswahl</f:link.action>                    
                            <f:link.action class="btn btn-default" action="deleteQuali" controller="Mitarbeiterqualifikation" arguments="{mitarbeiter:mitarbeiter}" title="Entfernt alle Qualifikationen!">Alle entfernen</f:link.action>                    
                        </div>
                    </f:if>
                    <br />
                </f:for>
            </f:then>
            <f:else>
                <f:link.action class="btn btn-default" action="list" controller="Qualifikation" arguments="{mitarbeiter:mitarbeiter, key:'auswahl'}">Auswahl</f:link.action><br />                    
            </f:else>
        </f:if>
        
        
<script type="text/javascript">   
    $(document).ready(function() {      
        var date = $( "#dateb" ).datepicker({ dateFormat: 'dd-mm-yy' }).valueOf(); // Formatierte Datumsausgabe nach Auswahl 
    });
    //window.onclick = setDate;
    /** setDates<br />
     * wandelt das Datum in einen Unix-Timestamp um
     * @returns {undefined}
     * @author Markus Puffer
     */
    function setDates() {         
        var datDate = document.getElementById("dateb").value;
        //alert(datDate);
        if (datDate == 0 || datDate == '') {
            document.getElementById("dateInteger").value = 0;
        } else {            
            var dat = datDate.split("-");
            var newDate = dat[1] + "/" + dat[0] + "/" + dat[2];
            //var datInteger = (new Date(datDate).getTime());
            var datInteger = (new Date(newDate).getTime()) / 1000;
            document.getElementById("dateInteger").value = datInteger;
        }        
    }
</script>

